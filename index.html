<!DOCTYPE html>
<html lang="fa" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>محاسبه‌گر سود علی‌الحساب</title>
    <link rel="shortcut icon" href="favicon.ico" type="image/x-icon">
    <link rel="icon" href="favicon.ico" type="image/x-icon">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link rel="preconnect" href="https://cdn.fontcdn.ir" crossorigin>
    <link href="https://cdn.fontcdn.ir/Font/Persian/YekanBakh/YekanBakh.css" rel="stylesheet">
    <link rel="stylesheet" href="style.css">
    <script type="importmap">
        {
            "imports": {
                "@material/web/": "https://esm.run/@material/web/"
            }
        }
    </script>
    <script type="module">
        import '@material/web/all.js';
        import {styles as typescaleStyles} from '@material/web/typography/md-typescale-styles.js';
        document.adoptedStyleSheets.push(typescaleStyles.styleSheet);
    </script>
</head>
<body>
    <div class="container">
        <h1>محاسبه‌گر خرید اقساطی سکه</h1>
            <div class="calculator">
                <h2 class="table-title">لطفا تعداد سکه و اقساط مورد نظر خود را وارد کنید:</h2>
                
                <table id="coin-table">
                    <thead>
                        <tr>
                            <th>نوع سکه</th>
                            <th>قیمت روز</th>
                            <th>مقدار</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td>سکه امامی</td>
                            <td><span id="price-full" class="loading-text">درحال بارگذاری...</span></td>
                            <td>
                                <md-outlined-text-field 
                                    id="count-full" 
                                    type="text" 
                                    value="۰" 
                                    oninput="formatCountInput(this)" 
                                    onfocus="resetCountOnFocus(this)"
                                    style="width:80px; text-align:center;"
                                    label="عدد">
                                </md-outlined-text-field>
                            </td>
                        </tr>
                        <tr>
                            <td>نیم سکه</td>
                            <td><span id="price-half" class="loading-text">درحال بارگذاری...</span></td>
                            <td>
                                <md-outlined-text-field 
                                    id="count-half" 
                                    type="text" 
                                    value="۰" 
                                    oninput="formatCountInput(this)" 
                                    onfocus="resetCountOnFocus(this)"
                                    style="width:80px; text-align:center;"
                                    label="عدد">
                                </md-outlined-text-field>
                            </td>
                        </tr>
                        <tr>
                            <td>ربع سکه</td>
                            <td><span id="price-quarter" class="loading-text">درحال بارگذاری...</span></td>
                            <td>
                                <md-outlined-text-field 
                                    id="count-quarter" 
                                    type="text" 
                                    value="۰" 
                                    oninput="formatCountInput(this)" 
                                    onfocus="resetCountOnFocus(this)"
                                    style="width:80px; text-align:center;"
                                    label="عدد">
                                </md-outlined-text-field>
                            </td>
                        </tr>
                        <tr>
                            <td>سکه گرمی</td>
                            <td><span id="price-gram" class="loading-text">درحال بارگذاری...</span></td>
                            <td>
                                <md-outlined-text-field 
                                    id="count-gram" 
                                    type="text" 
                                    value="۰" 
                                    oninput="formatCountInput(this)" 
                                    onfocus="resetCountOnFocus(this)"
                                    style="width:80px; text-align:center;"
                                    label="عدد">
                                </md-outlined-text-field>
                            </td>
                        </tr>
                        <tr>
                            <td>طلای آب شده</td>
                            <td><span id="price-melted" class="loading-text">درحال بارگذاری...</span></td>
                            <td>
                                <md-outlined-text-field 
                                    id="count-melted" 
                                    type="text" 
                                    value="۰" 
                                    oninput="formatCountInput(this)" 
                                    onfocus="resetCountOnFocus(this)"
                                    style="width:80px; text-align:center;"
                                    label="گرم">
                                </md-outlined-text-field>
                            </td>
                        </tr>
                    </tbody>
                </table>

                <div class="price-update-info">
                    <p>
                        آخرین به‌روزرسانی قیمت‌ها: <span id="last-update">—</span>
                    </p>
                </div>

                <table id="installment-settings" style="margin-top: 12px;">
                    <tbody>
                        <tr>
                            <td>تعداد اقساط</td>
                            <td>
                                <md-outlined-select id="installments-count" style="font-family: 'Yekan Bakh', 'Vazirmatn', sans-serif;">
                                    <md-select-option value="3">۳</md-select-option>
                                    <md-select-option value="4">۴</md-select-option>
                                    <md-select-option value="5">۵</md-select-option>
                                    <md-select-option value="6">۶</md-select-option>
                                    <md-select-option value="7">۷</md-select-option>
                                    <md-select-option value="8">۸</md-select-option>
                                    <md-select-option value="9">۹</md-select-option>
                                    <md-select-option value="10">۱۰</md-select-option>
                                </md-outlined-select>
                            </td>
                        </tr>
                    </tbody>
                </table>
                <span id="price-goldmini" style="display:none"></span>
            
            <div class="results" id="results">
                <h2 class="table-title">اقساط و وثائق مورد نیاز شما به شرح زیر می‌باشد:</h2>
                <table id="details-table">
                    <tbody>
                        <tr>
                            <th>مبلغ کل</th>
                            <td id="detail-total">—</td>
                        </tr>
                        <tr>
                            <th>مبلغ هر قسط</th>
                            <td id="detail-installment">—</td>
                        </tr>
                        <tr>
                            <th>وثیقه مورد نیاز</th>
                            <td id="detail-collateral">—</td>
                        </tr>
                    </tbody>
                </table>
            </div>
            
            


            <div class="contact-card">
                <h2 class="table-title">تماس با ما</h2>
                <div class="contact-content">
                    <p>دفتر مرکزی: قم، پردیسان، انتهای بلوار شهروند، جنب دانشگاه شهاب دانش، کارخانه نوآوری کیهان</p>
                    <p>تلفن تماس: <a class="contact-phone" href="tel:09038742510">۰۹۰۳۸۷۴۲۵۱۰</a></p>
                </div>
            </div>
        </div>
    </div>
    <script src="script.js"></script>
    <script>
    (function liveReload(){
      const key = '__ver';
      let last = null;
      async function tick(){
        try {
          const res = await fetch('/__version?_=' + Date.now());
          if (!res.ok) return;
          const j = await res.json();
          if (last === null) last = j.version;
          if (j.version !== last) {
            location.reload();
            return;
          }
        } catch(e) {}
        setTimeout(tick, 1000);
      }
      tick();
    })();
    </script>
</body>
</html> 