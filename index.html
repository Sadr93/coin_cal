<!DOCTYPE html>
<html lang="fa" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>محاسبه‌گر سود علی‌الحساب</title>
    <link rel="shortcut icon" href="favicon.ico" type="image/x-icon">
    <link rel="icon" href="favicon.ico" type="image/x-icon">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Vazirmatn:wght@400;500;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <div class="container">
        <h1>محاسبه‌گر خرید اقساطی سکه</h1>
            <div class="calculator">
                <h2 class="table-title">لطفا تعداد سکه و اقساط مورد نظر خود را وارد کنید:</h2>
                
                <table id="coin-table">
                    <thead>
                        <tr>
                            <th>نوع سکه</th>
                            <th>قیمت روز</th>
                            <th>مقدار</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td>سکه امامی</td>
                            <td><span id="price-full" class="loading-text">درحال بارگذاری...</span></td>
                            <td>
                                <input type="text" id="count-full" inputmode="numeric" value="۰" oninput="formatCountInput(this)" onfocus="resetCountOnFocus(this)" style="width:80px; text-align:center;">
                                <span style="font-size:12px; color:#666; margin-right:5px;">عدد</span>
                            </td>
                        </tr>
                        <tr>
                            <td>نیم سکه</td>
                            <td><span id="price-half" class="loading-text">درحال بارگذاری...</span></td>
                            <td>
                                <input type="text" id="count-half" inputmode="numeric" value="۰" oninput="formatCountInput(this)" onfocus="resetCountOnFocus(this)" style="width:80px; text-align:center;">
                                <span style="font-size:12px; color:#666; margin-right:5px;">عدد</span>
                            </td>
                        </tr>
                        <tr>
                            <td>ربع سکه</td>
                            <td><span id="price-quarter" class="loading-text">درحال بارگذاری...</span></td>
                            <td>
                                <input type="text" id="count-quarter" inputmode="numeric" value="۰" oninput="formatCountInput(this)" onfocus="resetCountOnFocus(this)" style="width:80px; text-align:center;">
                                <span style="font-size:12px; color:#666; margin-right:5px;">عدد</span>
                            </td>
                        </tr>
                        <tr>
                            <td>سکه گرمی</td>
                            <td><span id="price-gram" class="loading-text">درحال بارگذاری...</span></td>
                            <td>
                                <input type="text" id="count-gram" inputmode="numeric" value="۰" oninput="formatCountInput(this)" onfocus="resetCountOnFocus(this)" style="width:80px; text-align:center;">
                                <span style="font-size:12px; color:#666; margin-right:5px;">عدد</span>
                            </td>
                        </tr>
                        <tr>
                            <td>طلای آب شده</td>
                            <td><span id="price-melted" class="loading-text">درحال بارگذاری...</span></td>
                            <td>
                                <input type="text" id="count-melted" inputmode="numeric" value="۰" oninput="formatCountInput(this)" onfocus="resetCountOnFocus(this)" style="width:80px; text-align:center;">
                                <span style="font-size:12px; color:#666; margin-right:5px;">گرم</span>
                            </td>
                        </tr>
                    </tbody>
                </table>

                <div class="price-update-info" style="margin-top: 12px; margin-bottom: 8px;">
                    <p style="text-align: center; font-size: 0.85rem; color: #666; margin: 4px 0;">
                        آخرین به‌روزرسانی قیمت‌ها: <span id="last-update" style="color: #1e3c72; font-weight: 600;">—</span>
                    </p>
                </div>

                <table id="installment-settings" style="margin-top: 12px;">
                    <tbody>
                        <tr>
                            <td>تعداد اقساط</td>
                            <td>
                                <select id="installments-count" style="padding:8px; border-radius:6px; font-family: 'Vazirmatn', sans-serif;">
                                    <option value="3">۳</option>
                                    <option value="4">۴</option>
                                    <option value="5">۵</option>
                                    <option value="6">۶</option>
                                    <option value="7">۷</option>
                                    <option value="8">۸</option>
                                    <option value="9">۹</option>
                                    <option value="10">۱۰</option>
                                </select>
                            </td>
                        </tr>
                    </tbody>
                </table>
                <span id="price-goldmini" style="display:none"></span>
            
            <div class="results" id="results">
                <h2 class="table-title">اقساط و وثائق مورد نیاز شما به شرح زیر می‌باشد:</h2>
                <table id="details-table">
                    <tbody>
                        <tr>
                            <th>مبلغ کل</th>
                            <td id="detail-total">—</td>
                        </tr>
                        <tr>
                            <th>مبلغ هر قسط</th>
                            <td id="detail-installment">—</td>
                        </tr>
                        <tr>
                            <th>وثیقه مورد نیاز</th>
                            <td id="detail-collateral">—</td>
                        </tr>
                    </tbody>
                </table>
            </div>
            
            


            <div class="contact-card">
                <h2 class="table-title">تماس با ما</h2>
                <div class="contact-content">
                    <p>دفتر مرکزی: قم، پردیسان، انتهای بلوار شهروند، جنب دانشگاه شهاب دانش، کارخانه نوآوری کیهان</p>
                    <p>تلفن تماس: <a class="contact-phone" href="tel:09038742510">۰۹۰۳۸۷۴۲۵۱۰</a></p>
                </div>
            </div>
        </div>
    </div>
    <script src="script.js"></script>
    <script>
    (function liveReload(){
      const key = '__ver';
      let last = null;
      async function tick(){
        try {
          const res = await fetch('/__version?_=' + Date.now());
          if (!res.ok) return;
          const j = await res.json();
          if (last === null) last = j.version;
          if (j.version !== last) {
            location.reload();
            return;
          }
        } catch(e) {}
        setTimeout(tick, 1000);
      }
      tick();
    })();
    </script>
</body>
</html> 